# Infrastructure Setup

[Documentation](Documentation.md)

To keep the setup simple and efficient, the entire approach revolves around a single `terraform apply` command. Follow these steps to set up the infrastructure:

1. **AWS Profile**: Ensure that you have an AWS profile available in your current terminal context. This profile should have the necessary permissions to create all the required AWS resources. For this setup, we used an AWS profile with Administrator Access.

2. **Terraform Apply**: Run the following command to initiate the infrastructure setup:

    ```shell
    terraform apply
    ```

    There are some dependencies between the Terraform files, so resource creation follows this sequence: **Networking -> EKS Cluster -> EKS Managed Group**. All other tasks can proceed in parallel.

3. **Update Kubectl Configuration**: After the `terraform apply` command completes successfully, update your `kubectl` configuration file using the following command:

    ```shell
    aws eks update-kubeconfig --region eu-west-1 --name <cluster-name>
    ```

    Replace `<cluster-name>` with the actual name of your cluster. You can find the cluster name in the output generated by the `terraform apply` command.

4. **GitHub Pipeline Secrets**: To finalize the setup or update it, create secrets for use in your GitHub pipeline deployment. These secrets include:

   - **AWS_ACCESS_KEY_ID**: Use the provided access key ID.
   - **AWS_SECRET_ACCESS_KEY**: Use the provided secret key.

   You can retrieve the secret from the Terraform state file.

With these steps, you can efficiently set up the infrastructure, update your `kubectl` configuration, and configure the necessary secrets for your GitHub pipeline deployment.
